---
// Import assets & Components
import { Image } from "astro:assets";
import Layout from "../layouts/layout.astro";
import Shiba1 from "../assets/images/shiba inu sepia/image 3.png";
import Shiba2 from "../assets/images/shiba inu sepia/image 4.png";
import Shiba3 from "../assets/images/shiba inu sepia/image 5.png";
import Shiba4 from "../assets/images/shiba inu sepia/image 6.png";
import Shiba5 from "../assets/images/shiba inu sepia/image 7.png";
import Shiba6 from "../assets/images/shiba inu sepia/image 8.png";
import Customer1 from "../assets/images/shiba inu sepia/customers/Frame 118.png";
import Customer2 from "../assets/images/shiba inu sepia/customers/Frame 119.png";
import Customer3 from "../assets/images/shiba inu sepia/customers/Frame 120.png";
import Customer4 from "../assets/images/shiba inu sepia/customers/Frame 121.png";
import Customer5 from "../assets/images/shiba inu sepia/customers/Frame 122.png";
import Arrowleftbut from "../assets/icons/arrowleftbutton.svg";
import Arrowrightbut from "../assets/icons/arrowroghtbutton.svg";
import HealthInsurance from "../assets/icons/healthguareantee.svg";
import IdentificatioInsurance from "../assets/icons/identificationguarantee.svg";
import Chat from "../assets/icons/chat.svg";
import Cardpets from "../components/card1.astro";
import Share from "../assets/icons/share.svg";
import Facebook from "../assets/icons/Facebook.svg";
import Twitter from "../assets/icons/twitter.svg";
import Instagram from "../assets/icons/instagram.svg";
import Youtube from "../assets/icons/youtube.svg";

const pet = {
    sku: "#0000076",
    name: "Shiba Inu Sepia",
    price: "34,000,000 VND",
    gender: "Female",
    age: "3 Months",
    size: "Small",
    color: "Apricot & Tan",
    vaccinated: "Yes",
    dewormed: "Yes",
    cert: "Yes (MKA)",
    microchip: "Yes",
    location: "Vietnam",
    published: "12 Oct 2022",
    info: "Pure breed Shih Tzu. Good body structure. With MKA cert and Microchip. Father from champion lineage.",
};

const images = [Shiba1, Shiba2, Shiba3, Shiba4, Shiba5, Shiba6];

const customers = [
    Customer1,
    Customer2,
    Customer3,
    Customer4,
    Customer5,
    Customer1,
    Customer2,
    Customer3,
    Customer4,
    Customer5,
];

const pets = [
    {
        name: "MO231 - Pomeranian White",
        gender: "Male",
        breed: "Small",
        color: "White",
        image: "/images/pomeranianwhite.png",
        age: "02",
        price: "6.900.000",
    },
    {
        name: "MO502 - Poodle Tiny Yellow",
        gender: "Female",
        breed: "Small",
        color: "Yellow",
        image: "/images/poodletinyyellow.png",
        age: "02",
        price: "3.900.000",
    },
    {
        name: "MO102 - Poodle Tiny Sepia",
        gender: "Male",
        breed: "Small",
        color: "Sepia",
        image: "/images/poodletinysepia.png",
        age: "02",
        price: "4.000.000",
    },
    {
        name: "MO512 - Alaskan Malamute Grey",
        gender: "Male",
        breed: "Small",
        color: "Grey",
        image: "/images/alaskamalamutegrey.png",
        age: "02",
        price: "8.900.000",
    },
];
---

<Layout>
    <!-- Product details section -->
    <section
        class="relative flex flex-col lg:flex-row w-full gap-6 mx-auto py-6"
    >
        <div
            class="flex flex-col lg:flex-row max-w-7xl lg:border border-neutral-10 rounded-2xl p-4 gap-6 mx-auto"
        >
            <div
                x-data="{
    index: 0,
    current: null,
    images: [],
    init() {
        this.images = Array.from(this.$el.querySelectorAll('[data-thumbnail]'));
        console.log(this.images);
    },
    get current() {
        return this.images[this.index];
    },
    prev() {
      this.index = (this.index - 1 + this.images.length) % this.images.length;
    },
    next() {
      this.index = (this.index + 1) % this.images.length;
    }
  }"
                class="flex flex-col gap-6"
            >
                <!-- Main Image wrapped with link -->
                <div class="w-full h-full relative">
                    <img
                        :src="current.src"
                        alt={pet.name}
                        class="w-full h-auto max-h-full object-cover rounded-2xl shadow-md"
                        x-ref="preview"
                    />

                    <div>
                        <!-- Left Button -->
                        <button
                            @click="prev"
                            class="absolute top-1/2 left-3 -translate-y-1/2 bg-neutral-0/20 w-10 h-10 rounded-full flex items-center justify-center shadow hover:bg-white"
                        >
                            <img src={Arrowleftbut.src} alt="Previous" />
                        </button>

                        <!-- Right Button -->
                        <button
                            @click="next"
                            class="absolute top-1/2 right-3 -translate-y-1/2 bg-neutral-0/20 w-10 h-10 rounded-full flex items-center justify-center shadow hover:bg-white"
                        >
                            <img src={Arrowrightbut.src} alt="Next" />
                        </button>
                    </div>
                </div>

                <!-- Thumbnails -->
                <div
                    class="flex justify-between gap-3 mt-4 overflow-x-auto no-scrollbar"
                >
                    {
                        images.map((img, idx) => (
                            <Image
                                src={img}
                                alt="Thumbnail"
                                class="w-30 object-cover rounded-lg cursor-pointer hover:border-2 hover:border-secondary-60 "
                                data-thumbnail
                                data-index={idx}
                                @click="index = parseInt($el.dataset.index)"
                            />
                        ))
                    }
                </div>

                <!-- Insurance bar -->
                <div
                    class="hidden lg:flex bg-secondary-40 font-bold text-primary rounded-lg p-3 gap-2"
                >
                    <div class="flex gap-2">
                        <HealthInsurance /><span
                            >100% health guarantee for pets</span
                        >
                    </div>
                    <div class="flex gap-2">
                        <IdentificatioInsurance /><span
                            >100% guarantee of pet identification</span
                        >
                    </div>
                </div>

                <!-- share ans social medias -->
                <div class="hidden lg:flex gap-6">
                    <div class="flex gap-3 items-center font-bold text-primary">
                        <Share />
                        <p>Share:</p>
                    </div>
                    <div class="flex gap-5 text-neutral-40 items-center">
                        <a href="#"><Facebook /></a>
                        <a href="#"><Twitter /></a>
                        <a href="#"><Instagram /></a>
                        <a href="#"><Youtube /></a>
                    </div>
                </div>
            </div>

            <!-- Right section -->
            <div class="flex flex-col w-full lg:w-1/2 gap-5">
                <!-- Breadcrumb -->
                <div class="w-1/8 mx-auto bg-neutral-40 h-2 rounded-full"></div>
                <nav class="text-sm text-gray-500 mb-4">
                    <a href="/" class="hover:text-primary">Home</a> ›
                    <a href="/dog" class="hover:text-primary">Dog</a> ›
                    <a href="/dog/large" class="hover:text-primary">Large Dog</a
                    > ›
                    <span class="text-gray-800">{pet.name}</span>
                </nav>

                <!-- Title & Price -->
                <div class="mb-4">
                    <p class="text-xs text-gray-500">SKU {pet.sku}</p>
                    <h1 class="text-2xl font-bold text-gray-900">{pet.name}</h1>
                    <p class="text-lg font-semibold text-primary mt-1">
                        {pet.price}
                    </p>
                </div>

                <!-- Buttons -->
                <div class="w-full flex gap-3 mb-6 font-bold lg:pr-20">
                    <button
                        class="bg-primary w-1/3 text-white px-3 py-2 rounded-full shadow hover:bg-primary/90"
                    >
                        Contact Us
                    </button>
                    <button
                        class="w-2/3 flex gap-2 items-center justify-center border border-primary text-primary px-5 py-2 rounded-full hover:bg-primary hover:text-white transition"
                    >
                        <Chat />
                        Chat with Monito
                    </button>
                </div>

                <!-- Pet attributes -->

                <div class="text-neutral-60 overflow-hidden rounded-xl">
                    <div class="lg:hidden flex gap-6 justify-between">
                        <div class="font-bold text-primary">Information</div>
                        <div
                            class="flex gap-3 items-center font-bold text-primary"
                        >
                            <Share />
                            <p>Share</p>
                        </div>
                    </div>
                    <dl class="divide-y divide-neutral-10 text-sm">
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">SKU</dt>
                            <dd class="font-medium">: {pet.sku}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Gender</dt>
                            <dd class="font-medium">: {pet.gender}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Age</dt>
                            <dd class="font-medium">: {pet.age}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Size</dt>
                            <dd class="font-medium">: {pet.size}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Color</dt>
                            <dd class="font-medium">: {pet.color}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Vaccinated</dt>
                            <dd class="font-medium">{pet.vaccinated}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Dewormed</dt>
                            <dd class="font-medium">: {pet.dewormed}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Cert</dt>
                            <dd class="font-medium">: {pet.cert}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Microchip</dt>
                            <dd class="font-medium">: {pet.microchip}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Location</dt>
                            <dd class="font-medium">: {pet.location}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">Published Date</dt>
                            <dd class="font-medium">: {pet.published}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3">
                            <dt class="text-neutral-60">
                                Additional Information
                            </dt>
                            <dd class="font-medium w-3/4">: {pet.info}</dd>
                        </div>
                        <div class="grid grid-cols-2 gap-4 p-3"></div>
                    </dl>
                </div>
            </div>
            <div
                class="lg:hidden flex flex-col bg-secondary-40 font-bold text-primary rounded-lg p-3 gap-2"
            >
                <div class="flex gap-2">
                    <HealthInsurance /><span
                        >100% health guarantee for pets</span
                    >
                </div>
                <div class="flex gap-2">
                    <IdentificatioInsurance /><span
                        >100% guarantee of pet identification</span
                    >
                </div>
            </div>
        </div>
    </section>

    <section
        x-data="{ scrollX: 0,
        maxScroll: 0,
        get progress() {
            return Math.round((this.scrollX / this.maxScroll) * 5) || 0
        }
    }"
        x-init="
        const scroller = $refs.scroller;
        maxScroll = scroller.scrollWidth - scroller.clientWidth;
        scroller.addEventListener('scroll', () => {
            scrollX = scroller.scrollLeft;
        })
    "
        class="relative"
    >
        <div class="max-w-7xl mx-auto px-4">
            <h1 class="text-2xl font-bold mb-4">Our lovely customers</h1>

            <!-- Scrollable row -->
            <div
                class="flex overflow-x-auto space-x-4 pb-4 no-scrollbar"
                x-ref="scroller"
                @scroll="
        const el = $refs.scrollContainer;
        progress = (el.scrollLeft / (el.scrollWidth - el.clientWidth)) * 100;
      "
            >
                {
                    customers.map((img) => (
                        <Image
                            src={img}
                            alt="Thumbnail"
                            class="w-40 h-40 object-cover rounded-lg flex-shrink-0"
                            data-thumbnail
                        />
                    ))
                }
            </div>
            <div class="flex justify-center mt-4 space-x-2">
                <template x-for="i in 6" :key="i">
                    <div
                        class="w-2 h-2 rounded-full"
                        :class="progress === (i-1) ? 'bg-blue-900 scale-125 w-5' : 'bg-gray-300'"
                    >
                    </div>
                </template>
            </div>
        </div>
    </section>

    <section>
        <div class="max-w-7xl mx-auto">
            <div class="flex justify-between align-baseline">
                <div class="flex flex-col">
                    <h2 class="font-medium text-base">You already know ?</h2>
                    <h3 class="text-2xl text-primary font-bold">
                        Useful pet knowledge
                    </h3>
                </div>
            </div>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 p-6">
                {pets.map((pet) => <Cardpets {...pet} />)}
            </div>
        </div>
    </section>
</Layout>
